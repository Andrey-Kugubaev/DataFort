# Тестовое задание на позицию python-разработчик в компанию DataFort

![](https://img.shields.io/badge/python-3.9-green)
![](https://img.shields.io/badge/PostgreSQL-14.6-green)
![](https://img.shields.io/badge/schedule-1.1.0-green)
<br>

## Оглавление:

- [Введение](#введение)
- [Список городов](#cписок_городов)
- [Погодные характеристики](#погодные_характеристики)
- [Инфраструктура](#инфраструктура)
- [Ограничения](#ограничения)
- [Планы по развитию](#планы_по_развитию)
- [Инструкция по запуску](#инструкция_по_запуску)
----
### <anchor>Введение</anchor>
_Сервис по сбору информации о показателях климатических условий заданных мест для дальнейшего использования в задачах компании._

_Информация собирается с сайта https://openweathermap.org/ для 50 самых больших городов мира.
Запись в базу данных производтся каждый час._

----
### <anchor>Список городов</anchor>
Список городов собирается с заданного файла с данными.
Для каждого города сохраняется:
- Название;
- Координата северной широты;
- Координата восточной долготы;
- Численность населения.
----
### <anchor>Погодные характеристики</anchor>
Сайт https://openweathermap.org/ позволяет получить большое количетсво параметров климатических условий.
В настоящем проекте для каждого города, по заданным координатам, сохряняются следующие данные (_текущие значения на время сохранения_):
- Температура воздуха;
- Темперутара воздуха "по ощущениям";
- Влажность воздуха.

Все данные передаются серверу в метрической системе. 

----
### <anchor>Инфраструктура</anchor>
- База данных **PostgeSQL**
- - Данная база данных выбрана как одна из самых удобных и популярных баз реляционного типа;
- - В проекте использованы две таблицы. Основая с информацие о погоде и дополнительная с информацией о городах. Данная структура является самой удобной, отвечающей поставленной задаче;
- Язык програмирования и версия **Python 3.9**
- - Данная версия языка поддерживает все необходимые версии библиотек, нововведения в версиях 3.10 и 3.11 на данном этапе работ не используются и не планируется, перевести сервис на более свежую версию языка не составит труда;
- Библиотека **schedule**
- - Для периодического обращения сервиса для получения данных о погоде использованная библиотека schedule, позволяющая настроить расписание работы необхолимых функций;
----
### <anchor>Ограничения</anchor>

- Получение данных о городах из файла с данными;
- Отсутствие требования о сроках хранения данных о температуре. Необходимо предусмотреть срок и удалять из базы устаревшие данные;
- Библиотека *schedule*. При расширении проекта и увеличении функциональности следует предусмотреть переход на *celery*
- Сайт, предоставляющий информация о погоде. В бесплатный тариф входит ограниченное количество запросов и предстовляемых данных. _Для решения поставленной задачи данный тариф подходит_

----
### <anchor>Планы по развитию</anchor>
- Усовершенстование скрипта по загрузке населенных пунктов. Добавление возможности удаления населенных пунктов;
- Подключение web-приложения, для удобной визуализации данных;
- Написание API для использования собранных данных сторонними приложениями.

----
### <anchor>Инструкция по запуску</anchor>

1. Создаем .env и заполняем переменные окружения:
`APPID= ваша api-ключ от сайта https://openweathermap.org/`
`DATAFILE=адрес файла со списком городов`
`DB_ENGINE=postgres
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432`
2. Устанавливаем `Docker`

3. Собираем `docker-compose`
`docker-compose up -d --build`
4. Останавливаем и удаляем контейнеры:
`docker-compose down -v`

----